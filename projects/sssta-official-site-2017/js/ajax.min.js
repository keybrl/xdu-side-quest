var get_my_profile_url="./info";var sign_up_url="./register";var sign_in_url="./login";var post_my_profile_url="./info";function createXHR(){var a;if(window.XMLHttpRequest){a=new XMLHttpRequest()}else{a=new ActiveXObject("Microsoft.res")}return a}function get_my_profile(){var a=createXHR();a.onreadystatechange=function(){if(a.readyState==4){if(a.status==200){var b=JSON.parse(a.responseText);if(b.sex=="male"){document.getElementById("name_and_number").innerHTML="<b style='color: dodgerblue;'>♂</b> "+b.name+"<small>"+b.account+"</small>"}else{document.getElementById("name_and_number").innerHTML="<b style='color: deeppink;'>♀</b>"+b.name+"<small>"+b.account+"</small>"}document.getElementById("email-input3").value=b.email;document.getElementById("phone-input3").value=b.phone;document.getElementById("qq-input3").value=b.qq;document.getElementById("wechat-input3").value=b.wechat;if(b.direction!=""){var c=document.getElementById("direction-input3").value=b.direction}document.getElementById("description-input3").value=b.description;if(b.web_a!=""){document.getElementById("web_a-"+b.web_a+"-input3").checked=true}document.getElementById("web_b-input3").value=b.web_b;document.getElementById("game_a-input3").value=b.game_a;document.getElementById("acm_a-input3").value=b.acm_a;document.getElementById("web-option").classList.add("hidden");document.getElementById("game-option").classList.add("hidden");document.getElementById("acm-option").classList.add("hidden");if(b.direction=="web"||b.direction=="game"||b.direction=="acm"){document.getElementById(c+"-option").classList.remove("hidden")}document.getElementById("profile-li").classList.remove("disabled");document.getElementById("profile-a").setAttribute("onclick","turn_to('profile')");turn_to("profile")}else{document.getElementById("profile-li").classList.add("disabled");document.getElementById("profile-a").removeAttribute("onclick");turn_to("sign_in")}}};a.open("GET",get_my_profile_url,true);a.send()}function post_my_profile(){var f=createXHR();f.onreadystatechange=function(){if(f.readyState==4){if(f.status==200){alert("Good Boy!");get_my_profile()}else{document.getElementById("profile-li").classList.add("disabled");document.getElementById("profile-a").removeAttribute("onclick");turn_to("sign_in")}}};var g=document.getElementById("email-input3").value;var e=document.getElementById("phone-input3").value;var k=document.getElementById("qq-input3").value;var h=document.getElementById("wechat-input3").value;var j=document.getElementById("direction-input3").value;var l=document.getElementById("description-input3").value;var d=document.getElementById("game_a-input3").value;var a=document.getElementById("acm_a-input3").value;for(i=0;i<3;i++){if(document.getElementsByName("web_a")[i].checked){var c=document.getElementsByName("web_a")[i].value}}var b=document.getElementById("web_b-input3").value;f.open("POST",post_my_profile_url,true);f.setRequestHeader("Content-type","application/x-www-form-urlencoded");f.send("email="+g+"&phone="+e+"&qq="+k+"&wechat="+h+"&direction="+j+"&description="+l+"&game_a="+d+"&acm_a="+a+"&web_a="+c+"&web_b="+b)}function sign_up(){var d=createXHR();d.onreadystatechange=function(){if(d.readyState==4){if(d.status==200){window.location.href="./sign_up_success.html?name="+c}else{if(d.status==403){document.getElementById("had_signed").classList.remove("hidden");document.getElementById("profile-li").classList.add("disabled");document.getElementById("profile-a").removeAttribute("onclick");turn_to("sign_up")}else{if(d.status==422){alert("信息不充分！")}}}}};var c=document.getElementById("name-input1").value;var e=document.getElementById("sex-input1").value;var b=document.getElementById("email-input1").value;var f=document.getElementById("account-input1").value;var a=md5(document.getElementById("pass-input1").value);d.open("POST",sign_up_url,true);d.setRequestHeader("Content-type","application/x-www-form-urlencoded");d.send("name="+c+"&sex="+e+"&email="+b+"&account="+f+"&password="+a)}function sign_in(){var b=createXHR();b.onreadystatechange=function(){if(b.readyState==4){if(b.status==200){get_my_profile();document.getElementById("pass_wrong").classList.add("hidden");document.getElementById("num_unsigned").classList.add("hidden")}else{if(b.status==403){document.getElementById("pass_wrong").classList.remove("hidden");document.getElementById("num_unsigned").classList.add("hidden");document.getElementById("profile-li").classList.add("disabled");document.getElementById("profile-a").removeAttribute("onclick");turn_to("sign_in")}else{if(b.status==404){document.getElementById("pass_wrong").classList.add("hidden");document.getElementById("num_unsigned").classList.remove("hidden");document.getElementById("profile-li").classList.add("disabled");document.getElementById("profile-a").removeAttribute("onclick");turn_to("sign_in")}}}}};var c=document.getElementById("account-input2").value;var a=md5(document.getElementById("pass-input2").value);b.open("POST",sign_in_url,true);b.setRequestHeader("Content-type","application/x-www-form-urlencoded");b.send("account="+c+"&password="+a)};