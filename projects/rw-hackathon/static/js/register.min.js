layui.use("form",function(){var a=layui.form});var form_register=new Vue({el:"#form_register",data:{group_name_tip:"请填写",is_error:false,is_ok:false,form_tip:""}});function form_check_registered(a,c){var b=false;$.ajax({url:url_check_registered,data:{name:a,value:c},async:false,xhrFields:{withCredentials:true},complete:function(d){b=(404!==d.status)}});return b}function form_check_group_name(){var a=form_register.$data;a.group_name_tip="请填写";a.is_error=false;a.is_ok=false;var b=$("#form-register-group_name").val();if(!b){return false}if(form_check_registered("group_name",b)){a.group_name_tip="该组名已被使用";a.is_error=true;return false}else{a.group_name_tip="该组名可用";a.is_ok=true;return true}}function form_check(){var e=$("#form-register-group_name").val();var a=$("#form-register-email").val();var b=$("#form-register-password").val();var d=$("#form-register-reenter_password").val();var c=form_register.$data;c.form_tip="";if(!e||!a||!b||!d){c.form_tip="表单信息不全，请补充完整后提交"}else{if(form_check_registered("group_name",e)){c.form_tip="该组名已被使用，请更换后重试，或直接登录"}else{if(form_check_registered("email",a)){c.form_tip="该邮箱已被使用，请更换后重试，或直接登录"}else{if(b!==d){c.form_tip="两次输入的密码不一样，请确认后重新提交"}else{return true}}}}return false}function register(){if(!form_check()){return false}var d=$("#form-register-group_name").val();var a=$("#form-register-email").val();var c=1;if($("#form_register-grade2").is(":checked")){c=2}else{if($("#form_register-grade3").is(":checked")){c=3}else{c=1}}var b={group_name:d,email:a,password:$("#form-register-password").val(),grade:c};$.ajax({url:url_register,type:"POST",data:b,xhrFields:{withCredentials:true},complete:function(e){if(200===e.status){window.location.href="./register_success.html?group_name="+d+"&email="+a}else{if(400===e.status){alert("提交信息不全")}else{if(403===e.status){alert("帐号已注册")}else{alert("未知错误，请稍后重试")}}}}})};